<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="954px" preserveAspectRatio="none" style="width:467px;height:954px;" version="1.1" viewBox="0 0 467 954" width="467px" zoomAndPan="magnify"><defs><filter height="300%" id="f12x7qupqqqbdp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f12x7qupqqqbdp)" height="61.875" style="stroke:#000000;stroke-width:2.0;" width="330.5" x="14" y="283.4922"/><rect fill="#FFFFFF" filter="url(#f12x7qupqqqbdp)" height="135.4688" style="stroke:#000000;stroke-width:2.0;" width="330.5" x="14" y="358.3672"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="330.5" x="14" y="449.8984"/><rect fill="#FFFFFF" filter="url(#f12x7qupqqqbdp)" height="74.875" style="stroke:#000000;stroke-width:2.0;" width="260" x="14" y="506.8359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="30" x2="30" y1="40.2969" y2="872.0391"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="244" x2="244" y1="40.2969" y2="872.0391"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="328.5" x2="328.5" y1="40.2969" y2="872.0391"/><rect fill="#FEFECE" filter="url(#f12x7qupqqqbdp)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="12" y="24.9951">Alice</text><rect fill="#FEFECE" filter="url(#f12x7qupqqqbdp)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="99" x="192.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="199.5" y="24.9951">Parent Layer</text><rect fill="#FEFECE" filter="url(#f12x7qupqqqbdp)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="305.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="312.5" y="24.9951">Bob</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="30" x2="72" y1="84.5625" y2="84.5625"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="72" x2="72" y1="84.5625" y2="97.5625"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="31" x2="72" y1="97.5625" y2="97.5625"/><polygon fill="#0000FF" points="41,93.5625,31,97.5625,41,101.5625,37,97.5625" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="37" y="64.3638">User specifies participants,app;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="37" y="79.4966">initial balance and data.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="172.0938" y2="172.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="172.0938" y2="185.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="185.0938" y2="185.0938"/><polygon fill="#A80036" points="41,181.0938,31,185.0938,41,189.0938,37,185.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="37" y="121.6294">Generate channel proposal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="37" y="136.7622">with challenge duration and;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="37" y="151.895">alice's nonce share,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="37" y="167.0278">ephemeral off-chain address.</text><polygon fill="#A80036" points="316.5,210.2266,326.5,214.2266,316.5,218.2266,320.5,214.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="322.5" y1="214.2266" y2="214.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="105.25" y="209.1606">Send Channel Proposal</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="328.5" x2="370.5" y1="258.4922" y2="258.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="370.5" x2="370.5" y1="258.4922" y2="271.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="329.5" x2="370.5" y1="271.4922" y2="271.4922"/><polygon fill="#0000FF" points="339.5,267.4922,329.5,271.4922,339.5,275.4922,335.5,271.4922" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="335.5" y="238.2935">User chooses to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="335.5" y="253.4263">accept/reject</text><path d="M14,283.4922 L84,283.4922 L84,290.4922 L74,300.4922 L14,300.4922 L14,283.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="61.875" style="stroke:#000000;stroke-width:2.0;" width="330.5" x="14" y="283.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="29" y="296.5591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="99" y="295.7026">[if User did not repond</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="99" y="308.5073">within expected time]</text><polygon fill="#A80036" points="41,333.3672,31,337.3672,41,341.3672,37,337.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="327.5" y1="337.3672" y2="337.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="159.75" y="332.3013">Reject</text><path d="M14,358.3672 L84,358.3672 L84,365.3672 L74,375.3672 L14,375.3672 L14,358.3672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="135.4688" style="stroke:#000000;stroke-width:2.0;" width="330.5" x="14" y="358.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="29" y="371.4341">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="99" y="370.5776">[accept]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="14" x2="344.5" y1="450.8984" y2="450.8984"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="19" y="461.1089">[reject]</text><polygon fill="#A80036" points="41,427.8984,31,431.8984,41,435.8984,37,431.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="327.5" y1="431.8984" y2="431.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="137.25" y="396.5669">Respond with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="118.75" y="411.6997">bob's nonce share,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="85.75" y="426.8325">ephemeral off-chain address.</text><polygon fill="#A80036" points="41,481.8359,31,485.8359,41,489.8359,37,485.8359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="327.5" y1="485.8359" y2="485.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="159.75" y="480.77">Reject</text><path d="M14,506.8359 L84,506.8359 L84,513.8359 L74,523.8359 L14,523.8359 L14,506.8359 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="74.875" style="stroke:#000000;stroke-width:2.0;" width="260" x="14" y="506.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="29" y="519.9028">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="99" y="519.0464">[if Bob does not respond</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="99" y="531.8511">within expected time]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="560.7109" y2="560.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="560.7109" y2="573.7109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="573.7109" y2="573.7109"/><polygon fill="#A80036" points="41,569.7109,31,573.7109,41,577.7109,37,573.7109" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="37" y="555.645">Reject</text><path d="M11,595.7109 L11,620.7109 L347,620.7109 L347,605.7109 L337,595.7109 L11,595.7109 " fill="#D3D3D3" filter="url(#f12x7qupqqqbdp)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M337,595.7109 L337,605.7109 L347,605.7109 L337,595.7109 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="46.75" y="612.7778">When rejected, the protocol stops here.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="666.1094" y2="666.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="666.1094" y2="679.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="679.1094" y2="679.1094"/><polygon fill="#A80036" points="41,675.1094,31,679.1094,41,683.1094,37,679.1094" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="37" y="645.9106">Generate &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="37" y="661.0435">sign initial state</text><line style="stroke:#A80036;stroke-width:1.0;" x1="328.5" x2="370.5" y1="666.1094" y2="666.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="370.5" x2="370.5" y1="666.1094" y2="679.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="329.5" x2="370.5" y1="679.1094" y2="679.1094"/><polygon fill="#A80036" points="339.5,675.1094,329.5,679.1094,339.5,683.1094,335.5,679.1094" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="335.5" y="645.9106">Generate &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="335.5" y="661.0435">sign initial state</text><polygon fill="#A80036" points="316.5,719.375,326.5,723.375,316.5,727.375,320.5,723.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="322.5" y1="723.375" y2="723.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="132.25" y="703.1763">Alice signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="128.25" y="718.3091">over initial state</text><polygon fill="#A80036" points="41,763.6406,31,767.6406,41,771.6406,37,767.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="327.5" y1="767.6406" y2="767.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="134.75" y="747.4419">Bob signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="128.25" y="762.5747">over initial state</text><line style="stroke:#A80036;stroke-width:1.0;" x1="328.5" x2="370.5" y1="811.9063" y2="811.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="370.5" x2="370.5" y1="811.9063" y2="824.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="329.5" x2="370.5" y1="824.9063" y2="824.9063"/><polygon fill="#A80036" points="339.5,820.9063,329.5,824.9063,339.5,828.9063,335.5,824.9063" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="335.5" y="791.7075">Store initial state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="335.5" y="806.8403">with all signatures.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="811.9063" y2="811.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="811.9063" y2="824.9063"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="824.9063" y2="824.9063"/><polygon fill="#A80036" points="41,820.9063,31,824.9063,41,828.9063,37,824.9063" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="37" y="791.7075">Store initial state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="37" y="806.8403">with all signatures.</text><polygon fill="#A80036" points="232,850.0391,242,854.0391,232,858.0391,236,854.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="238" y1="854.0391" y2="854.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="121.5" y="848.9731">Fund</text><polygon fill="#A80036" points="255,850.0391,245,854.0391,255,858.0391,251,854.0391" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="327.5" y1="854.0391" y2="854.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="270.75" y="848.9731">Fund</text><rect fill="#DDDDDD" height="58.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="201" x="250.5" y="880.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="256.5" y="898.0342">Note:</text><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="256.5" y="914.3311">Blue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="295.5" y="914.3311">arrow indicates</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="189" x="256.5" y="930.6279">user interaction is required.</text><!--MD5=[38c23f1ede0694150bf91ca52855a857]
@startuml open_generic
!pragma teoz true
hide footbox
skinparam SequenceMessageAlign center

participant "Alice" as alice
participant "Parent Layer" as parentLayer
participant "Bob" as bob

alice -[#blue]> alice: User specifies participants,app;\ninitial balance and data.
alice -> alice: Generate channel proposal\nwith challenge duration and;\nalice's nonce share,\nephemeral off-chain address.
alice -> bob: Send Channel Proposal
bob -[#blue]> bob: User chooses to\naccept/reject
opt if User did not repond\nwithin expected time
alice <- bob: Reject
end

opt accept
alice <- bob: Respond with\nbob's nonce share,\nephemeral off-chain address.
else reject
alice <- bob: Reject
end

opt if Bob does not respond\nwithin expected time
alice -> alice: Reject
end

note over alice, bob #LightGray
When rejected, the protocol stops here.
end note

alice -> alice: Generate &\nsign initial state
& bob -> bob: Generate &\nsign initial state
alice -> bob: Alice signature\nover initial state
alice <- bob: Bob signature\nover initial state
bob -> bob: Store initial state \nwith all signatures.
& alice -> alice: Store initial state\nwith all signatures.

alice -> parentLayer: Fund
& bob -> parentLayer: Fund

legend bottom right
<b>Note:</b>
<color:blue>Blue </color> arrow indicates
user interaction is required.
endlegend

@enduml

PlantUML version 1.2020.21(Mon Nov 30 22:10:11 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>