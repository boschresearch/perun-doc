<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="805px" preserveAspectRatio="none" style="width:536px;height:805px;" version="1.1" viewBox="0 0 536 805" width="536px" zoomAndPan="magnify"><defs><filter height="300%" id="f15aazr035p4ih" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f15aazr035p4ih)" height="187.6016" style="stroke:#000000;stroke-width:2.0;" width="493.5" x="8" y="283.4922"/><rect fill="#FFFFFF" height="96.0703" style="stroke:none;stroke-width:1.0;" width="493.5" x="8" y="375.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="40.2969" y2="722.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="263" x2="263" y1="40.2969" y2="722.2891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="347.5" x2="347.5" y1="40.2969" y2="722.2891"/><rect fill="#FEFECE" filter="url(#f15aazr035p4ih)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="24" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="31" y="24.9951">Alice</text><rect fill="#FEFECE" filter="url(#f15aazr035p4ih)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="99" x="211.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="218.5" y="24.9951">Parent Layer</text><rect fill="#FEFECE" filter="url(#f15aazr035p4ih)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="324.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="331.5" y="24.9951">Bob</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="49" x2="91" y1="84.5625" y2="84.5625"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="91" x2="91" y1="84.5625" y2="97.5625"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="50" x2="91" y1="97.5625" y2="97.5625"/><polygon fill="#0000FF" points="60,93.5625,50,97.5625,60,101.5625,56,97.5625" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="56" y="64.3638">User specifies participants,app;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="56" y="79.4966">initial balance and data.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="172.0938" y2="172.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="172.0938" y2="185.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="91" y1="185.0938" y2="185.0938"/><polygon fill="#A80036" points="60,181.0938,50,185.0938,60,189.0938,56,185.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="56" y="121.6294">Generate channel proposal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="56" y="136.7622">with challenge duration and;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="56" y="151.895">alice's nonce share,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="56" y="167.0278">ephemeral off-chain address.</text><polygon fill="#A80036" points="335.5,210.2266,345.5,214.2266,335.5,218.2266,339.5,214.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="341.5" y1="214.2266" y2="214.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="124.25" y="209.1606">Send Channel Proposal</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="347.5" x2="389.5" y1="258.4922" y2="258.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="389.5" x2="389.5" y1="258.4922" y2="271.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="348.5" x2="389.5" y1="271.4922" y2="271.4922"/><polygon fill="#0000FF" points="358.5,267.4922,348.5,271.4922,358.5,275.4922,354.5,271.4922" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="354.5" y="238.2935">User chooses to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="354.5" y="253.4263">accept/reject</text><path d="M8,283.4922 L78,283.4922 L78,290.4922 L68,300.4922 L8,300.4922 L8,283.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="187.6016" style="stroke:#000000;stroke-width:2.0;" width="493.5" x="8" y="283.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="23" y="296.5591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="93" y="295.7026">[accept]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="8" x2="501.5" y1="376.0234" y2="376.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="13" y="386.2339">[reject]</text><polygon fill="#A80036" points="60,353.0234,50,357.0234,60,361.0234,56,357.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54" x2="346.5" y1="357.0234" y2="357.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="156.25" y="321.6919">Respond with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="137.75" y="336.8247">bob's nonce share,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="104.75" y="351.9575">ephemeral off-chain address.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="389.5" y1="410.9609" y2="410.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="389.5" x2="389.5" y1="410.9609" y2="423.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="348.5" x2="389.5" y1="423.9609" y2="423.9609"/><polygon fill="#A80036" points="358.5,419.9609,348.5,423.9609,358.5,427.9609,354.5,423.9609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="354.5" y="405.895">Ignore the proposal</text><path d="M30,436.9609 L30,461.9609 L366,461.9609 L366,446.9609 L356,436.9609 L30,436.9609 " fill="#D3D3D3" filter="url(#f15aazr035p4ih)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M356,436.9609 L356,446.9609 L366,446.9609 L356,436.9609 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="67.75" y="454.0278">When rejected,the protocol stops here.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="516.3594" y2="516.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="516.3594" y2="529.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="91" y1="529.3594" y2="529.3594"/><polygon fill="#A80036" points="60,525.3594,50,529.3594,60,533.3594,56,529.3594" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="56" y="496.1606">Generate &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="56" y="511.2935">sign initial state</text><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="389.5" y1="516.3594" y2="516.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="389.5" x2="389.5" y1="516.3594" y2="529.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="348.5" x2="389.5" y1="529.3594" y2="529.3594"/><polygon fill="#A80036" points="358.5,525.3594,348.5,529.3594,358.5,533.3594,354.5,529.3594" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="354.5" y="496.1606">Generate &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="354.5" y="511.2935">sign initial state</text><polygon fill="#A80036" points="335.5,569.625,345.5,573.625,335.5,577.625,339.5,573.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="341.5" y1="573.625" y2="573.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="151.25" y="553.4263">Alice signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="147.25" y="568.5591">over initial state</text><polygon fill="#A80036" points="60,613.8906,50,617.8906,60,621.8906,56,617.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54" x2="346.5" y1="617.8906" y2="617.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="153.75" y="597.6919">Bob signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="147.25" y="612.8247">over initial state</text><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="389.5" y1="662.1563" y2="662.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="389.5" x2="389.5" y1="662.1563" y2="675.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="348.5" x2="389.5" y1="675.1563" y2="675.1563"/><polygon fill="#A80036" points="358.5,671.1563,348.5,675.1563,358.5,679.1563,354.5,675.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="354.5" y="641.9575">Store initial state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="354.5" y="657.0903">with all signatures.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="662.1563" y2="662.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="662.1563" y2="675.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="91" y1="675.1563" y2="675.1563"/><polygon fill="#A80036" points="60,671.1563,50,675.1563,60,679.1563,56,675.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="56" y="641.9575">Store initial state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="56" y="657.0903">with all signatures.</text><polygon fill="#A80036" points="251,700.2891,261,704.2891,251,708.2891,255,704.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="257" y1="704.2891" y2="704.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="140.5" y="699.2231">Fund</text><polygon fill="#A80036" points="274,700.2891,264,704.2891,274,708.2891,270,704.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="268" x2="346.5" y1="704.2891" y2="704.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="289.75" y="699.2231">Fund</text><rect fill="#DDDDDD" height="58.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="201" x="319.5" y="730.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="325.5" y="748.2842">Note:</text><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="325.5" y="764.5811">Blue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="364.5" y="764.5811">arrow indicates</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="189" x="325.5" y="780.8779">user interaction is required.</text><!--MD5=[4736ea644679cfd0c00e461ebc17e0b4]
@startuml open_generic
!pragma teoz true
hide footbox
skinparam SequenceMessageAlign center

participant "Alice" as alice
participant "Parent Layer" as parentLayer
participant "Bob" as bob

alice -[#blue]> alice: User specifies participants,app;\ninitial balance and data.
alice -> alice: Generate channel proposal\nwith challenge duration and;\nalice's nonce share,\nephemeral off-chain address.
alice -> bob: Send Channel Proposal
bob -[#blue]> bob: User chooses to\naccept/reject
opt accept
alice <- bob: Respond with\nbob's nonce share,\nephemeral off-chain address.
else reject
bob -> bob: Ignore the proposal
note over alice, bob #LightGray
When rejected,the protocol stops here.
end note

end


alice -> alice: Generate &\nsign initial state
& bob -> bob: Generate &\nsign initial state
alice -> bob: Alice signature\nover initial state
alice <- bob: Bob signature\nover initial state
bob -> bob: Store initial state \nwith all signatures.
& alice -> alice: Store initial state\nwith all signatures.

alice -> parentLayer: Fund
& bob -> parentLayer: Fund

legend bottom right
<b>Note:</b>
<color:blue>Blue </color> arrow indicates
user interaction is required.
endlegend

@enduml

PlantUML version 1.2020.21(Mon Nov 30 22:10:11 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>