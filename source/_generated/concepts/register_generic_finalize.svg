<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="335px" preserveAspectRatio="none" style="width:349px;height:335px;" version="1.1" viewBox="0 0 349 335" width="349px" zoomAndPan="magnify"><defs><filter height="300%" id="ftq2hwmto5bio" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#ftq2hwmto5bio)" height="144.7969" style="stroke:#000000;stroke-width:2.0;" width="322" x="10" y="99.4297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="45" x2="45" y1="40.2969" y2="261.2266"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="251" x2="251" y1="40.2969" y2="261.2266"/><rect fill="#FEFECE" filter="url(#ftq2hwmto5bio)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="27" y="24.9951">Alice</text><rect fill="#FEFECE" filter="url(#ftq2hwmto5bio)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="228" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="235" y="24.9951">Bob</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="45" x2="87" y1="71.4297" y2="71.4297"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="87" x2="87" y1="71.4297" y2="84.4297"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="46" x2="87" y1="84.4297" y2="84.4297"/><polygon fill="#0000FF" points="56,80.4297,46,84.4297,56,88.4297,52,84.4297" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="52" y="66.3638">User proposes to settle</text><path d="M10,99.4297 L80,99.4297 L80,106.4297 L70,116.4297 L10,116.4297 L10,99.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="144.7969" style="stroke:#000000;stroke-width:2.0;" width="322" x="10" y="99.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="25" y="112.4966">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="95" y="111.6401">[if latest off-chain state is not final]</text><path d="M23,121.5625 L23,161.5625 L272,161.5625 L272,131.5625 L262,121.5625 L23,121.5625 " fill="#D3D3D3" filter="url(#ftq2hwmto5bio)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M262,121.5625 L262,131.5625 L272,131.5625 L262,121.5625 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="49" y="138.6294">Protocol is same as that for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="49" y="153.7622">regular off-chain transaction.</text><polygon fill="#A80036" points="239,203.0938,249,207.0938,239,211.0938,243,207.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="45" x2="245" y1="207.0938" y2="207.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="65.5" y="186.895">Send an off-chain update,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="57" y="202.0278">marking latest state as final.</text><polygon fill="#A80036" points="56,232.2266,46,236.2266,56,240.2266,52,236.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="250" y1="236.2266" y2="236.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="106.5" y="231.1606">accept/reject</text><rect fill="#DDDDDD" height="58.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="201" x="132" y="260.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="138" y="278.2217">Note:</text><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="138" y="294.5186">Blue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="177" y="294.5186">arrow indicates</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="189" x="138" y="310.8154">user interaction is required.</text><!--MD5=[fa6ec4b20e3e6869f4d5baa377d974b3]
@startuml register_generic_finalize
hide footbox
skinparam SequenceMessageAlign center

participant "Alice" as alice
participant "Bob" as bob

alice -[#blue]> alice: User proposes to settle
opt if latest off-chain state is not final
note over alice, bob #LightGray
Protocol is same as that for
regular off-chain transaction.
endnote
alice -> bob: Send an off-chain update,\nmarking latest state as final.
alice <- bob: accept/reject
end

legend bottom right
<b>Note:</b>
<color:blue>Blue </color> arrow indicates
user interaction is required.
endlegend

@enduml

PlantUML version 1.2020.21(Mon Nov 30 22:10:11 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>