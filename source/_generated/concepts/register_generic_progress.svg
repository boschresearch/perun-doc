<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="684px" preserveAspectRatio="none" style="width:512px;height:684px;" version="1.1" viewBox="0 0 512 684" width="512px" zoomAndPan="magnify"><defs><filter height="300%" id="f15uixyhd9iagj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f15uixyhd9iagj)" height="535.8125" style="stroke:#000000;stroke-width:2.0;" width="485" x="10" y="57.2969"/><rect fill="#FFFFFF" filter="url(#f15uixyhd9iagj)" height="447.4141" style="stroke:#000000;stroke-width:2.0;" width="465" x="20" y="138.6953"/><rect fill="#FFFFFF" filter="url(#f15uixyhd9iagj)" height="203.8047" style="stroke:#000000;stroke-width:2.0;" width="445" x="30" y="245.6406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="65" x2="65" y1="40.2969" y2="610.1094"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="257.5" x2="257.5" y1="40.2969" y2="610.1094"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="442" x2="442" y1="40.2969" y2="610.1094"/><rect fill="#FEFECE" filter="url(#f15uixyhd9iagj)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="40" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="47" y="24.9951">Alice</text><rect fill="#FEFECE" filter="url(#f15uixyhd9iagj)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="99" x="206.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="213.5" y="24.9951">Parent Layer</text><rect fill="#FEFECE" filter="url(#f15uixyhd9iagj)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="419" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="426" y="24.9951">Bob</text><path d="M10,57.2969 L80,57.2969 L80,64.2969 L70,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="535.8125" style="stroke:#000000;stroke-width:2.0;" width="485" x="10" y="57.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="25" y="70.3638">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="95" y="69.5073">[if channel has an app]</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="65" x2="107" y1="110.6953" y2="110.6953"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="107" x2="107" y1="110.6953" y2="123.6953"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="66" x2="107" y1="123.6953" y2="123.6953"/><polygon fill="#0000FF" points="76,119.6953,66,123.6953,76,127.6953,72,123.6953" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="72" y="90.4966">Progress app on-chain</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="72" y="105.6294">(next state)</text><path d="M20,138.6953 L90,138.6953 L90,145.6953 L80,155.6953 L20,155.6953 L20,138.6953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="447.4141" style="stroke:#000000;stroke-width:2.0;" width="465" x="20" y="138.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="35" y="151.7622">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="105" y="150.9058">[if after registering,</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="274" x="105" y="163.7104">challenge duration for register has passed</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="323" x="105" y="176.5151">and that for on-chain progression has not passed]</text><polygon fill="#A80036" points="246,226.6406,256,230.6406,246,234.6406,250,230.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="65" x2="252" y1="230.6406" y2="230.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="77" y="195.3091">Progress channel on-chain</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="112" y="210.4419">(next state with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="95.5" y="225.5747">only actor signature)</text><path d="M30,245.6406 L100,245.6406 L100,252.6406 L90,262.6406 L30,262.6406 L30,245.6406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="203.8047" style="stroke:#000000;stroke-width:2.0;" width="445" x="30" y="245.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="45" y="258.7075">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="262" x="115" y="257.8511">[if on-chain progression using next state</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="115" y="270.6558">is allowed by app]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="300" y1="339.9141" y2="339.9141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="300" x2="300" y1="339.9141" y2="352.9141"/><line style="stroke:#A80036;stroke-width:1.0;" x1="259" x2="300" y1="352.9141" y2="352.9141"/><polygon fill="#A80036" points="269,348.9141,259,352.9141,269,356.9141,265,352.9141" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="265" y="289.4497">Update registered state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="265" y="304.5825">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="265" y="319.7153">restart challenge duration</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="265" y="334.8481">for on-chain progression</text><polygon fill="#A80036" points="76,393.1797,66,397.1797,76,401.1797,72,397.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="70" x2="257" y1="397.1797" y2="397.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="117" y="376.981">Channel state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="96" y="392.1138">progressed on-chain</text><polygon fill="#A80036" points="430,437.4453,440,441.4453,430,445.4453,434,441.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="436" y1="441.4453" y2="441.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="305.5" y="421.2466">Channel state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="284.5" y="436.3794">progressed on-chain</text><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="300" y1="507.8438" y2="507.8438"/><line style="stroke:#A80036;stroke-width:1.0;" x1="300" x2="300" y1="507.8438" y2="520.8438"/><line style="stroke:#A80036;stroke-width:1.0;" x1="259" x2="300" y1="520.8438" y2="520.8438"/><polygon fill="#A80036" points="269,516.8438,259,520.8438,269,524.8438,265,520.8438" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="265" y="472.5122">Wait for challenge duration</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="265" y="487.645">for on-chain progression</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="265" y="502.7778">to expire</text><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="300" y1="565.1094" y2="565.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="300" x2="300" y1="565.1094" y2="578.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="259" x2="300" y1="578.1094" y2="578.1094"/><polygon fill="#A80036" points="269,574.1094,259,578.1094,269,582.1094,265,578.1094" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="265" y="544.9106">Channel finalized</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="265" y="560.0435">on-chain</text><rect fill="#DDDDDD" height="58.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="201" x="295" y="609.1094"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="301" y="627.1045">Note:</text><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="301" y="643.4014">Blue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="340" y="643.4014">arrow indicates</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="189" x="301" y="659.6982">user interaction is required.</text><!--MD5=[efc0f7b9c4fdd07c66ba860252954157]
@startuml register_generic_progress
hide footbox
skinparam SequenceMessageAlign center

participant "Alice" as alice
participant "Parent Layer" as parentLayer
participant "Bob" as bob


opt if channel has an app
alice -[#blue]> alice: Progress app on-chain\n(next state)
opt if after registering,\nchallenge duration for register has passed \nand that for on-chain progression has not passed
alice -> parentLayer: Progress channel on-chain\n(next state with\nonly actor signature)
opt if on-chain progression using next state\nis allowed by app
parentLayer -> parentLayer: Update registered state\nand\nrestart challenge duration\nfor on-chain progression
alice <- parentLayer: Channel state\nprogressed on-chain
parentLayer -> bob: Channel state\nprogressed on-chain
end
parentLayer -> parentLayer: Wait for challenge duration\nfor on-chain progression\nto expire
parentLayer -> parentLayer: Channel finalized\non-chain 
end
end

legend bottom right
<b>Note:</b>
<color:blue>Blue </color> arrow indicates
user interaction is required.
endlegend

@enduml

PlantUML version 1.2020.21(Mon Nov 30 22:10:11 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>