<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="365px" preserveAspectRatio="none" style="width:442px;height:365px;" version="1.1" viewBox="0 0 442 365" width="442px" zoomAndPan="magnify"><defs><filter height="300%" id="fk02iesf6tucs" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fk02iesf6tucs)" height="270.5938" style="stroke:#000000;stroke-width:2.0;" width="394" x="34.5" y="68.5938"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="50.5" x2="50.5" y1="56.5938" y2="358.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="237.5" x2="237.5" y1="56.5938" y2="358.1875"/><rect fill="#FEFECE" filter="url(#fk02iesf6tucs)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="87" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="32.5" y="24.9951">Alice</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="12" y="41.292">(Proposer)</text><rect fill="#FEFECE" filter="url(#fk02iesf6tucs)" height="46.5938" style="stroke:#A80036;stroke-width:1.5;" width="91" x="190" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="221.5" y="24.9951">Bob</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="197" y="41.292">(Proposee)</text><path d="M34.5,68.5938 L104.5,68.5938 L104.5,75.5938 L94.5,85.5938 L34.5,85.5938 L34.5,68.5938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="270.5938" style="stroke:#000000;stroke-width:2.0;" width="394" x="34.5" y="68.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="49.5" y="81.6606">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="234" x="119.5" y="80.8042">[if latest off-chain state is finalized]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="50.5" x2="92.5" y1="187.5234" y2="187.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="92.5" y1="187.5234" y2="200.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="51.5" x2="92.5" y1="200.5234" y2="200.5234"/><polygon fill="#A80036" points="61.5,196.5234,51.5,200.5234,61.5,204.5234,57.5,200.5234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="77.5" y="121.9263">Generate an update on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="61.5" y="137.0591">the parent ledger channel</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="84.5" y="152.1919">that unlocks the funds</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="85.5" y="167.3247">for the sub-channel ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="102.5" y="182.4575">as per final balance</text><line style="stroke:#A80036;stroke-width:1.0;" x1="237.5" x2="279.5" y1="187.5234" y2="187.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="279.5" x2="279.5" y1="187.5234" y2="200.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238.5" x2="279.5" y1="200.5234" y2="200.5234"/><polygon fill="#A80036" points="248.5,196.5234,238.5,200.5234,248.5,204.5234,244.5,200.5234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="244.5" y="106.7935">Wait for the specific</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="244.5" y="121.9263">update on the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="244.5" y="137.0591">parent ledger channel</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="244.5" y="152.1919">that unlocks funds for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="244.5" y="167.3247">this sub-channel ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="244.5" y="182.4575">as per final balance</text><polygon fill="#A80036" points="225.5,240.7891,235.5,244.7891,225.5,248.7891,229.5,244.7891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50.5" x2="231.5" y1="244.7891" y2="244.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="70.5" y="224.5903">Send an update on the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="74" y="239.7231">parent ledger channel</text><polygon fill="#A80036" points="61.5,285.0547,51.5,289.0547,61.5,293.0547,57.5,289.0547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="55.5" x2="236.5" y1="289.0547" y2="289.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="62.5" y="268.856">Accept the update on the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="74" y="283.9888">parent ledger channel</text><line style="stroke:#A80036;stroke-width:1.0;" x1="50.5" x2="92.5" y1="318.1875" y2="318.1875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="92.5" y1="318.1875" y2="331.1875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="51.5" x2="92.5" y1="331.1875" y2="331.1875"/><polygon fill="#A80036" points="61.5,327.1875,51.5,331.1875,61.5,335.1875,57.5,331.1875" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="57.5" y="313.1216">Sub-channel is withdrawn</text><line style="stroke:#A80036;stroke-width:1.0;" x1="237.5" x2="279.5" y1="318.1875" y2="318.1875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="279.5" x2="279.5" y1="318.1875" y2="331.1875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="238.5" x2="279.5" y1="331.1875" y2="331.1875"/><polygon fill="#A80036" points="248.5,327.1875,238.5,331.1875,248.5,335.1875,244.5,331.1875" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="244.5" y="313.1216">Sub-channel is withdrawn</text><!--MD5=[f6c637e1e2f633b27abd5e39e18af109]
@startuml settle_withdraw_sub
!pragma teoz true
hide footbox
skinparam SequenceMessageAlign center

participant "Alice\n(Proposer)" as alice
participant "Bob\n(Proposee)" as bob


opt if latest off-chain state is finalized
alice -> alice: Generate an update on\r the parent ledger channel\nthat unlocks the funds\nfor the sub-channel ID\nas per final balance
&bob -> bob: Wait for the specific \nupdate on the\nparent ledger channel\nthat unlocks funds for \nthis sub-channel ID\nas per final balance

alice -> bob: Send an update on the\nparent ledger channel
alice <- bob: Accept the update on the\nparent ledger channel

alice -> alice: Sub-channel is withdrawn
&bob -> bob: Sub-channel is withdrawn
end

@enduml

PlantUML version 1.2020.21(Mon Nov 30 22:10:11 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>